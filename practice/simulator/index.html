<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flash Loan Practice Simulator – Crypto For Seniors</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;background:#0b0b0b;color:#e6e6e6;font-family:Arial,Helvetica,sans-serif;text-align:center}
.container{max-width:900px;margin:auto;padding:30px 20px}
.top{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #333;padding-bottom:10px}
select{background:#111;color:#fff;border:1px solid #444;padding:6px;border-radius:4px}
h1{color:#4da3ff;margin-top:25px}
.banner{border:2px solid #ffb84d;background:#1e1e1e;padding:14px;margin:25px auto;font-weight:bold}
p{max-width:720px;margin:16px auto;line-height:1.6}
input{padding:12px;font-size:1.1rem;width:220px;text-align:center;border-radius:6px;border:none}
button{margin-top:18px;padding:14px 28px;font-size:1.1rem;font-weight:bold;background:#4da3ff;color:#000;border:none;border-radius:6px;cursor:pointer}
.result{display:none;margin-top:30px;padding:20px;border:1px solid #333;background:#141414;max-width:720px;margin-left:auto;margin-right:auto}
a{color:#4da3ff;text-decoration:none;font-weight:bold}
</style>
</head>

<body>
<div class="container">

<div class="top">
  <a id="backTop" href="/cryptoforseniors/practice/"></a>
  <select id="lang"></select>
</div>

<h1 id="title"></h1>
<div id="banner" class="banner"></div>

<p id="intro"></p>
<p id="prompt"></p>

<input id="amount" type="number" placeholder="10000"><br>
<button id="run"></button>

<div id="out" class="result"></div>

<p style="margin-top:40px">
  <a id="backBottom" href="/cryptoforseniors/practice/"></a>
</p>

</div>

<script>
const TXT = {
  en: {
    n: "English",
    t: "Flash Loan Practice Simulator",
    b: "PRACTICE ONLY — Fake funds, real prices",
    i: "Learn how flash loans work using simulated funds in a safe environment.",
    p: "Enter a simulated loan amount (USDC):",
    r: "Run Simulation",
    bk: "← Back to Practice Mode",
    load: "Loading market price…",
    bad: "Please enter a valid amount.",
    res: "Simulation Result",
    m: "Market price used",
    l: "Simulated loan amount",
    c: "Estimated costs",
    g: "Estimated gain",
    pf: "Result: Profit",
    ls: "Result: Loss"
  },
  fr: {
    n: "Français",
    t: "Simulateur de Prêt Flash",
    b: "MODE PRATIQUE — Fonds simulés, prix réels",
    i: "Apprenez le fonctionnement des prêts flash avec des fonds simulés.",
    p: "Entrez un montant de prêt simulé (USDC) :",
    r: "Lancer la simulation",
    bk: "← Retour au mode pratique",
    load: "Chargement du prix du marché…",
    bad: "Veuillez entrer un montant valide.",
    res: "Résultat de la simulation",
    m: "Prix du marché utilisé",
    l: "Montant du prêt simulé",
    c: "Coûts estimés",
    g: "Gain estimé",
    pf: "Résultat : Profit",
    ls: "Résultat : Perte"
  },
  es: {
    n: "Español",
    t: "Simulador de Préstamo Flash",
    b: "MODO PRÁCTICA — Fondos simulados, precios reales",
    i: "Aprenda cómo funcionan los préstamos flash usando fondos simulados.",
    p: "Ingrese un monto de préstamo simulado (USDC):",
    r: "Ejecutar simulación",
    bk: "← Volver al modo práctica",
    load: "Cargando precio del mercado…",
    bad: "Por favor ingrese un monto válido.",
    res: "Resultado de la simulación",
    m: "Precio de mercado utilizado",
    l: "Monto del préstamo simulado",
    c: "Costos estimados",
    g: "Ganancia estimada",
    pf: "Resultado: Ganancia",
    ls: "Resultado: Pérdida"
  }
};

const $ = id => document.getElementById(id);
const sel = $("lang");

let currentLang = localStorage.getItem("cfs-lang") || "en";

Object.keys(TXT).forEach(k => {
  const o = document.createElement("option");
  o.value = k;
  o.textContent = TXT[k].n;
  sel.appendChild(o);
});

function setLang(lang) {
  currentLang = lang;
  localStorage.setItem("cfs-lang", lang);
  const t = TXT[lang];

  $("title").textContent = t.t;
  $("banner").textContent = t.b;
  $("intro").textContent = t.i;
  $("prompt").textContent = t.p;
  $("run").textContent = t.r;
  $("backTop").textContent = t.bk;
  $("backBottom").textContent = t.bk;
}

async function runSim() {
  const t = TXT[currentLang];
  const amt = parseFloat($("amount").value);
  const out = $("out");

  if (isNaN(amt) || amt <= 0) {
    alert(t.bad);
    return;
  }

  out.style.display = "block";
  out.textContent = t.load;

  const r = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd");
  const d = await r.json();
  const price = d.ethereum.usd;

  const cost = amt * 0.003;
  const gain = amt * 0.0025;
  const net = gain - cost;

  out.innerHTML = `
    <h3>${t.res}</h3>
    <p>${t.m}: $${price}</p>
    <p>${t.l}: $${amt.toLocaleString()}</p>
    <p>${t.c}: $${cost.toFixed(2)}</p>
    <p>${t.g}: $${gain.toFixed(2)}</p>
    <p><strong>${net > 0 ? t.pf : t.ls} $${Math.abs(net).toFixed(2)}</strong></p>
  `;
}

$("run").onclick = runSim;
sel.onchange = e => setLang(e.target.value);

sel.value = currentLang;
setLang(currentLang);
</script>

</body>
</html>
